{"rendered": {"description": {"raw": "While testing other pull requests, I saw some intermittent failures of the `SimApiTest.HxsSimInfo` test:\r\n~~~\r\n[ RUN      ] SimApiTest.HxsSimInfo\r\n[Msg] Waiting for master.\r\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\r\n[Msg] Publicized address: 172.23.2.90\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Dbg] [ServerFixture.cc:169] ServerFixture load in 1.1 seconds, timeout after 600 seconds\r\n[Err] [Visual.cc:2165] Unable to insert mesh[Cannot create GL vertex buffer]\r\nworld name: [default]\r\n[Wrn] [HaptixControlPlugin.cc:152] no polhemus_source model detected using predefine location.\r\n[Dbg] [HaptixControlPlugin.cc:159] Polhemus Source Pose [-0.5 0 1.3 3.14159 0 -1.57159]\r\nlibusb_open_device_with_vid_pid() failed\r\nFailed to connect to Polhemus\r\n[Wrn] [HaptixControlPlugin.cc:323] No usable polhemus setup detected.\r\nSuccessfully connected to keyboard node\r\nhxs_sim_info() Service call timed out.\r\n/home/scpeters/ws/handsim/src/handsim/test/integration/sim_api.cc:167: Failure\r\nValue of: hxOK\r\n  Actual: 0\r\nExpected: hxs_sim_info(&simInfo)\r\nWhich is: 1\r\n[Dbg] [ServerFixture.cc:118] ServerFixture::Unload\r\n[  FAILED  ] SimApiTest.HxsSimInfo (2732 ms)\r\n~~~\r\n\r\nFor the successful tests, I saw the `ServerFixture load` message after the `world name: [default]` message, but the failed tests had this message appearing first. That suggests an initialization problem. The `WorldPlugin`s and `ModelPlugin`s are not initialized until the first `World::Step`, so this PR takes a world step before calling `hxs_sim_info` to ensure that WorldPlugin's and ModelPlugin's have been loaded and makes the `SimApiTest.HxsSimInfo` test more reliable for me.", "markup": "markdown", "html": "<p>While testing other pull requests, I saw some intermittent failures of the <code>SimApiTest.HxsSimInfo</code> test:</p>\n<div class=\"codehilite\"><pre><span></span>[ RUN      ] SimApiTest.HxsSimInfo\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.90\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Dbg] [ServerFixture.cc:169] ServerFixture load in 1.1 seconds, timeout after 600 seconds\n[Err] [Visual.cc:2165] Unable to insert mesh[Cannot create GL vertex buffer]\nworld name: [default]\n[Wrn] [HaptixControlPlugin.cc:152] no polhemus_source model detected using predefine location.\n[Dbg] [HaptixControlPlugin.cc:159] Polhemus Source Pose [-0.5 0 1.3 3.14159 0 -1.57159]\nlibusb_open_device_with_vid_pid() failed\nFailed to connect to Polhemus\n[Wrn] [HaptixControlPlugin.cc:323] No usable polhemus setup detected.\nSuccessfully connected to keyboard node\nhxs_sim_info() Service call timed out.\n/home/scpeters/ws/handsim/src/handsim/test/integration/sim_api.cc:167: Failure\nValue of: hxOK\n  Actual: 0\nExpected: hxs_sim_info(&amp;simInfo)\nWhich is: 1\n[Dbg] [ServerFixture.cc:118] ServerFixture::Unload\n[  FAILED  ] SimApiTest.HxsSimInfo (2732 ms)\n</pre></div>\n\n\n<p>For the successful tests, I saw the <code>ServerFixture load</code> message after the <code>world name: [default]</code> message, but the failed tests had this message appearing first. That suggests an initialization problem. The <code>WorldPlugin</code>s and <code>ModelPlugin</code>s are not initialized until the first <code>World::Step</code>, so this PR takes a world step before calling <code>hxs_sim_info</code> to ensure that WorldPlugin's and ModelPlugin's have been loaded and makes the <code>SimApiTest.HxsSimInfo</code> test more reliable for me.</p>", "type": "rendered"}, "title": {"raw": "Improve SimApiTest.HxsSimInfo test reliability", "markup": "markdown", "html": "<p>Improve SimApiTest.HxsSimInfo test reliability</p>", "type": "rendered"}}, "type": "pullrequest", "description": "While testing other pull requests, I saw some intermittent failures of the `SimApiTest.HxsSimInfo` test:\r\n~~~\r\n[ RUN      ] SimApiTest.HxsSimInfo\r\n[Msg] Waiting for master.\r\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\r\n[Msg] Publicized address: 172.23.2.90\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Dbg] [ServerFixture.cc:169] ServerFixture load in 1.1 seconds, timeout after 600 seconds\r\n[Err] [Visual.cc:2165] Unable to insert mesh[Cannot create GL vertex buffer]\r\nworld name: [default]\r\n[Wrn] [HaptixControlPlugin.cc:152] no polhemus_source model detected using predefine location.\r\n[Dbg] [HaptixControlPlugin.cc:159] Polhemus Source Pose [-0.5 0 1.3 3.14159 0 -1.57159]\r\nlibusb_open_device_with_vid_pid() failed\r\nFailed to connect to Polhemus\r\n[Wrn] [HaptixControlPlugin.cc:323] No usable polhemus setup detected.\r\nSuccessfully connected to keyboard node\r\nhxs_sim_info() Service call timed out.\r\n/home/scpeters/ws/handsim/src/handsim/test/integration/sim_api.cc:167: Failure\r\nValue of: hxOK\r\n  Actual: 0\r\nExpected: hxs_sim_info(&simInfo)\r\nWhich is: 1\r\n[Dbg] [ServerFixture.cc:118] ServerFixture::Unload\r\n[  FAILED  ] SimApiTest.HxsSimInfo (2732 ms)\r\n~~~\r\n\r\nFor the successful tests, I saw the `ServerFixture load` message after the `world name: [default]` message, but the failed tests had this message appearing first. That suggests an initialization problem. The `WorldPlugin`s and `ModelPlugin`s are not initialized until the first `World::Step`, so this PR takes a world step before calling `hxs_sim_info` to ensure that WorldPlugin's and ModelPlugin's have been loaded and makes the `SimApiTest.HxsSimInfo` test more reliable for me.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/handsim/pullrequests/138/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/handsim/diffstat/osrf/handsim:a32bfb9c7763%0D52b3e0002d5e?from_pullrequest_id=138"}, "commits": {"href": "data/repositories/osrf/handsim/pullrequests/138/commits.json"}, "self": {"href": "data/repositories/osrf/handsim/pullrequests/138.json"}, "comments": {"href": "data/repositories/osrf/handsim/pullrequests/138/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/handsim/pullrequests/138/merge"}, "html": {"href": "#!/osrf/handsim/pull-requests/138"}, "activity": {"href": "data/repositories/osrf/handsim/pullrequests/138/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/handsim/diff/osrf/handsim:a32bfb9c7763%0D52b3e0002d5e?from_pullrequest_id=138"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/handsim/pullrequests/138/approve"}, "statuses": {"href": "data/repositories/osrf/handsim/pullrequests/138/statuses_page=1.json"}}, "title": "Improve SimApiTest.HxsSimInfo test reliability", "close_source_branch": true, "reviewers": [], "id": 138, "destination": {"commit": {"hash": "52b3e0002d5e", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/handsim/commit/52b3e0002d5e.json"}, "html": {"href": "#!/osrf/handsim/commits/52b3e0002d5e"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/handsim.json"}, "html": {"href": "#!/osrf/handsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9c7d89af-6eb6-40b1-9f69-da1ae9d129ce}ts=c_plus_plus"}}, "type": "repository", "name": "handsim", "full_name": "osrf/handsim", "uuid": "{9c7d89af-6eb6-40b1-9f69-da1ae9d129ce}"}, "branch": {"name": "default"}}, "created_on": "2015-09-01T20:24:11.165264+00:00", "summary": {"raw": "While testing other pull requests, I saw some intermittent failures of the `SimApiTest.HxsSimInfo` test:\r\n~~~\r\n[ RUN      ] SimApiTest.HxsSimInfo\r\n[Msg] Waiting for master.\r\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\r\n[Msg] Publicized address: 172.23.2.90\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\r\n[Dbg] [ServerFixture.cc:169] ServerFixture load in 1.1 seconds, timeout after 600 seconds\r\n[Err] [Visual.cc:2165] Unable to insert mesh[Cannot create GL vertex buffer]\r\nworld name: [default]\r\n[Wrn] [HaptixControlPlugin.cc:152] no polhemus_source model detected using predefine location.\r\n[Dbg] [HaptixControlPlugin.cc:159] Polhemus Source Pose [-0.5 0 1.3 3.14159 0 -1.57159]\r\nlibusb_open_device_with_vid_pid() failed\r\nFailed to connect to Polhemus\r\n[Wrn] [HaptixControlPlugin.cc:323] No usable polhemus setup detected.\r\nSuccessfully connected to keyboard node\r\nhxs_sim_info() Service call timed out.\r\n/home/scpeters/ws/handsim/src/handsim/test/integration/sim_api.cc:167: Failure\r\nValue of: hxOK\r\n  Actual: 0\r\nExpected: hxs_sim_info(&simInfo)\r\nWhich is: 1\r\n[Dbg] [ServerFixture.cc:118] ServerFixture::Unload\r\n[  FAILED  ] SimApiTest.HxsSimInfo (2732 ms)\r\n~~~\r\n\r\nFor the successful tests, I saw the `ServerFixture load` message after the `world name: [default]` message, but the failed tests had this message appearing first. That suggests an initialization problem. The `WorldPlugin`s and `ModelPlugin`s are not initialized until the first `World::Step`, so this PR takes a world step before calling `hxs_sim_info` to ensure that WorldPlugin's and ModelPlugin's have been loaded and makes the `SimApiTest.HxsSimInfo` test more reliable for me.", "markup": "markdown", "html": "<p>While testing other pull requests, I saw some intermittent failures of the <code>SimApiTest.HxsSimInfo</code> test:</p>\n<div class=\"codehilite\"><pre><span></span>[ RUN      ] SimApiTest.HxsSimInfo\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.2.90\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:91] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu\n[Dbg] [ServerFixture.cc:169] ServerFixture load in 1.1 seconds, timeout after 600 seconds\n[Err] [Visual.cc:2165] Unable to insert mesh[Cannot create GL vertex buffer]\nworld name: [default]\n[Wrn] [HaptixControlPlugin.cc:152] no polhemus_source model detected using predefine location.\n[Dbg] [HaptixControlPlugin.cc:159] Polhemus Source Pose [-0.5 0 1.3 3.14159 0 -1.57159]\nlibusb_open_device_with_vid_pid() failed\nFailed to connect to Polhemus\n[Wrn] [HaptixControlPlugin.cc:323] No usable polhemus setup detected.\nSuccessfully connected to keyboard node\nhxs_sim_info() Service call timed out.\n/home/scpeters/ws/handsim/src/handsim/test/integration/sim_api.cc:167: Failure\nValue of: hxOK\n  Actual: 0\nExpected: hxs_sim_info(&amp;simInfo)\nWhich is: 1\n[Dbg] [ServerFixture.cc:118] ServerFixture::Unload\n[  FAILED  ] SimApiTest.HxsSimInfo (2732 ms)\n</pre></div>\n\n\n<p>For the successful tests, I saw the <code>ServerFixture load</code> message after the <code>world name: [default]</code> message, but the failed tests had this message appearing first. That suggests an initialization problem. The <code>WorldPlugin</code>s and <code>ModelPlugin</code>s are not initialized until the first <code>World::Step</code>, so this PR takes a world step before calling <code>hxs_sim_info</code> to ensure that WorldPlugin's and ModelPlugin's have been loaded and makes the <code>SimApiTest.HxsSimInfo</code> test more reliable for me.</p>", "type": "rendered"}, "source": {"commit": {"hash": "6d8e77a57082", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/handsim/commit/6d8e77a57082.json"}, "html": {"href": "#!/osrf/handsim/commits/6d8e77a57082"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/handsim.json"}, "html": {"href": "#!/osrf/handsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9c7d89af-6eb6-40b1-9f69-da1ae9d129ce}ts=c_plus_plus"}}, "type": "repository", "name": "handsim", "full_name": "osrf/handsim", "uuid": "{9c7d89af-6eb6-40b1-9f69-da1ae9d129ce}"}, "branch": {"name": "sim_info_test_reliability"}}, "comment_count": 7, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2015-09-24T00:01:06.604246+00:00", "type": "participant", "approved": false, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2015-09-03T21:34:15.942544+00:00", "type": "participant", "approved": true, "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}}, {"role": "PARTICIPANT", "participated_on": "2015-09-21T10:31:49.779015+00:00", "type": "participant", "approved": true, "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}}], "reason": "", "updated_on": "2015-09-24T00:01:22.984258+00:00", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "merge_commit": {"hash": "a32bfb9c7763", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/handsim/commit/a32bfb9c7763.json"}, "html": {"href": "#!/osrf/handsim/commits/a32bfb9c7763"}}}, "closed_by": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}