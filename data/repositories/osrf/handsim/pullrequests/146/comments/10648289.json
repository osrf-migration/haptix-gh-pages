{"links": {"self": {"href": "data/repositories/osrf/handsim/pullrequests/146/comments/10648289.json"}, "html": {"href": "#!/osrf/handsim/pull-requests/146/_/diff#comment-10648289"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 146, "links": {"self": {"href": "data/repositories/osrf/handsim/pullrequests/146.json"}, "html": {"href": "#!/osrf/handsim/pull-requests/146"}}, "title": "add or remove constraints dynamically using gazebo create_joint_dynamically branch"}, "content": {"raw": "sim_api.cc segfaults for me when running the new test\"\n\n\n```\n#!c++\n\n[ RUN      ] SimApiTest.HxsAddRemoveConstraint\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.23.1.7\n[Wrn] [ImuSensor.cc:92] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:92] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:92] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:92] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\n[Wrn] [ImuSensor.cc:92] Deprecation: IMU noise SDF value have changed. Please refer to http://sdformat.org/spec?ver=1.5&elem=sensor#sensor_imu\nworld name: [default]\n[Wrn] [HaptixControlPlugin.cc:152] no polhemus_source model detected using predefine location.\n[Dbg] [HaptixControlPlugin.cc:159] Polhemus Source Pose [-0.5 0 1.3 3.14159 0 -1.57159]\nlibusb_open_device_with_vid_pid() failed\nFailed to connect to Polhemus\n[Wrn] [HaptixControlPlugin.cc:323] No usable polhemus setup detected.\nSuccessfully connected to keyboard node\n[Dbg] [ServerFixture.cc:193] ServerFixture load in 1.5 seconds, timeout after 600 seconds\nhxs_add_constraint executed.\n[Wrn] [ODEJoint.cc:1065] Spring Damper for Joint[test_constraint] is not initialized because either parent[1] or child[0] is static.\nINTEGRATION_sim_api: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::physics::Model; typename boost::detail::sp_member_access<T>::type = gazebo::physics::Model*]: Assertion `px != 0' failed.\nAborted (core dumped)\n```\n\nIt seems to segfault in the line `world->Step(1000)` after creating the new joint dynamically.\n\n", "markup": "markdown", "html": "<p>sim_api.cc segfaults for me when running the new test\"</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"p\">[</span> <span class=\"n\">RUN</span>      <span class=\"p\">]</span> <span class=\"n\">SimApiTest</span><span class=\"p\">.</span><span class=\"n\">HxsAddRemoveConstraint</span>\n<span class=\"p\">[</span><span class=\"n\">Msg</span><span class=\"p\">]</span> <span class=\"n\">Waiting</span> <span class=\"k\">for</span> <span class=\"n\">master</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Msg</span><span class=\"p\">]</span> <span class=\"n\">Connected</span> <span class=\"n\">to</span> <span class=\"n\">gazebo</span> <span class=\"n\">master</span> <span class=\"err\">@</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//127.0.0.1:11345</span>\n<span class=\"p\">[</span><span class=\"n\">Msg</span><span class=\"p\">]</span> <span class=\"n\">Publicized</span> <span class=\"nl\">address</span><span class=\"p\">:</span> <span class=\"mf\">172.23.1.7</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ImuSensor</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">92</span><span class=\"p\">]</span> <span class=\"nl\">Deprecation</span><span class=\"p\">:</span> <span class=\"n\">IMU</span> <span class=\"n\">noise</span> <span class=\"n\">SDF</span> <span class=\"n\">value</span> <span class=\"n\">have</span> <span class=\"n\">changed</span><span class=\"p\">.</span> <span class=\"n\">Please</span> <span class=\"n\">refer</span> <span class=\"n\">to</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ImuSensor</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">92</span><span class=\"p\">]</span> <span class=\"nl\">Deprecation</span><span class=\"p\">:</span> <span class=\"n\">IMU</span> <span class=\"n\">noise</span> <span class=\"n\">SDF</span> <span class=\"n\">value</span> <span class=\"n\">have</span> <span class=\"n\">changed</span><span class=\"p\">.</span> <span class=\"n\">Please</span> <span class=\"n\">refer</span> <span class=\"n\">to</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ImuSensor</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">92</span><span class=\"p\">]</span> <span class=\"nl\">Deprecation</span><span class=\"p\">:</span> <span class=\"n\">IMU</span> <span class=\"n\">noise</span> <span class=\"n\">SDF</span> <span class=\"n\">value</span> <span class=\"n\">have</span> <span class=\"n\">changed</span><span class=\"p\">.</span> <span class=\"n\">Please</span> <span class=\"n\">refer</span> <span class=\"n\">to</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ImuSensor</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">92</span><span class=\"p\">]</span> <span class=\"nl\">Deprecation</span><span class=\"p\">:</span> <span class=\"n\">IMU</span> <span class=\"n\">noise</span> <span class=\"n\">SDF</span> <span class=\"n\">value</span> <span class=\"n\">have</span> <span class=\"n\">changed</span><span class=\"p\">.</span> <span class=\"n\">Please</span> <span class=\"n\">refer</span> <span class=\"n\">to</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ImuSensor</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">92</span><span class=\"p\">]</span> <span class=\"nl\">Deprecation</span><span class=\"p\">:</span> <span class=\"n\">IMU</span> <span class=\"n\">noise</span> <span class=\"n\">SDF</span> <span class=\"n\">value</span> <span class=\"n\">have</span> <span class=\"n\">changed</span><span class=\"p\">.</span> <span class=\"n\">Please</span> <span class=\"n\">refer</span> <span class=\"n\">to</span> <span class=\"nl\">http</span><span class=\"p\">:</span><span class=\"c1\">//sdformat.org/spec?ver=1.5&amp;elem=sensor#sensor_imu</span>\n<span class=\"n\">world</span> <span class=\"nl\">name</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"k\">default</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">HaptixControlPlugin</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">152</span><span class=\"p\">]</span> <span class=\"n\">no</span> <span class=\"n\">polhemus_source</span> <span class=\"n\">model</span> <span class=\"n\">detected</span> <span class=\"k\">using</span> <span class=\"n\">predefine</span> <span class=\"n\">location</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Dbg</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">HaptixControlPlugin</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">159</span><span class=\"p\">]</span> <span class=\"n\">Polhemus</span> <span class=\"n\">Source</span> <span class=\"n\">Pose</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">0.5</span> <span class=\"mi\">0</span> <span class=\"mf\">1.3</span> <span class=\"mf\">3.14159</span> <span class=\"mi\">0</span> <span class=\"o\">-</span><span class=\"mf\">1.57159</span><span class=\"p\">]</span>\n<span class=\"n\">libusb_open_device_with_vid_pid</span><span class=\"p\">()</span> <span class=\"n\">failed</span>\n<span class=\"n\">Failed</span> <span class=\"n\">to</span> <span class=\"n\">connect</span> <span class=\"n\">to</span> <span class=\"n\">Polhemus</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">HaptixControlPlugin</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">323</span><span class=\"p\">]</span> <span class=\"n\">No</span> <span class=\"n\">usable</span> <span class=\"n\">polhemus</span> <span class=\"n\">setup</span> <span class=\"n\">detected</span><span class=\"p\">.</span>\n<span class=\"n\">Successfully</span> <span class=\"n\">connected</span> <span class=\"n\">to</span> <span class=\"n\">keyboard</span> <span class=\"n\">node</span>\n<span class=\"p\">[</span><span class=\"n\">Dbg</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ServerFixture</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">193</span><span class=\"p\">]</span> <span class=\"n\">ServerFixture</span> <span class=\"n\">load</span> <span class=\"n\">in</span> <span class=\"mf\">1.5</span> <span class=\"n\">seconds</span><span class=\"p\">,</span> <span class=\"n\">timeout</span> <span class=\"n\">after</span> <span class=\"mi\">600</span> <span class=\"n\">seconds</span>\n<span class=\"n\">hxs_add_constraint</span> <span class=\"n\">executed</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Wrn</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">ODEJoint</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">1065</span><span class=\"p\">]</span> <span class=\"n\">Spring</span> <span class=\"n\">Damper</span> <span class=\"k\">for</span> <span class=\"n\">Joint</span><span class=\"p\">[</span><span class=\"n\">test_constraint</span><span class=\"p\">]</span> <span class=\"n\">is</span> <span class=\"n\">not</span> <span class=\"n\">initialized</span> <span class=\"n\">because</span> <span class=\"n\">either</span> <span class=\"n\">parent</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"n\">or</span> <span class=\"n\">child</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"n\">is</span> <span class=\"k\">static</span><span class=\"p\">.</span>\n<span class=\"nl\">INTEGRATION_sim_api</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">boost</span><span class=\"o\">/</span><span class=\"n\">smart_ptr</span><span class=\"o\">/</span><span class=\"n\">shared_ptr</span><span class=\"p\">.</span><span class=\"nl\">hpp</span><span class=\"p\">:</span><span class=\"mi\">653</span><span class=\"o\">:</span> <span class=\"k\">typename</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">detail</span><span class=\"o\">::</span><span class=\"n\">sp_member_access</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"n\">type</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"k\">operator</span><span class=\"o\">-&gt;</span><span class=\"p\">()</span> <span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"n\">with</span> <span class=\"n\">T</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">Model</span><span class=\"p\">;</span> <span class=\"k\">typename</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">detail</span><span class=\"o\">::</span><span class=\"n\">sp_member_access</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"n\">type</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">physics</span><span class=\"o\">::</span><span class=\"n\">Model</span><span class=\"o\">*</span><span class=\"p\">]</span><span class=\"o\">:</span> <span class=\"n\">Assertion</span> <span class=\"err\">`</span><span class=\"n\">px</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"err\">&#39;</span> <span class=\"n\">failed</span><span class=\"p\">.</span>\n<span class=\"n\">Aborted</span> <span class=\"p\">(</span><span class=\"n\">core</span> <span class=\"n\">dumped</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>It seems to segfault in the line <code>world-&gt;Step(1000)</code> after creating the new joint dynamically.</p>", "type": "rendered"}, "created_on": "2015-10-08T18:59:31.199843+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2015-10-08T19:00:19.968389+00:00", "type": "pullrequest_comment", "id": 10648289}